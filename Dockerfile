FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGFlcm9nZWFyLWRpZ2dlci1hcGIKZGVzY3JpcHRpb246IE1vYmls\
ZSBDSXxDRCBpbnRlZ3JhdGVzIHdpdGggSmVua2lucyBQaXBlbGluZXMgdG8gdGVzdCBhbmQgYnVp\
bGQgeW91ciBtb2JpbGUgYmluYXJpZXMuCmJpbmRhYmxlOiBGYWxzZQphc3luYzogb3B0aW9uYWwK\
dGFnczoKICAtIG1vYmlsZS1zZXJ2aWNlCm1ldGFkYXRhOgogIGRpc3BsYXlOYW1lOiBNb2JpbGUg\
Q0l8Q0QKICBsb25nRGVzY3JpcHRpb246ICJUbyB1c2UgdGhlIE1vYmlsZSBDSXxDRCBzZXJ2aWNl\
IHlvdSBtdXN0IGZpcnN0IGFncmVlIHRvIHRoZSBBbmRyb2lkIFNESyBMaWNlbnNlIEFncmVlbWVu\
dCwgd2hpY2ggY2FuIGJlIHJlYWQgYXQgdGhlIGZvbGxvd2luZyBVUkw6IGh0dHBzOi8vZGV2ZWxv\
cGVyLmFuZHJvaWQuY29tL3N0dWRpby90ZXJtcy5odG1sLlxuIElmIHRoZSBib3ggaXMgbm90IGNo\
ZWNrZWQgdGhlIGluc3RhbGxlciB3aWxsIHRha2Ugbm8gYWN0aW9uLiIKICBzZXJ2aWNlTmFtZTog\
YWVyb2dlYXItZGlnZ2VyCiAgaW1hZ2VVcmw6ICJodHRwOi8vZGVzaWduLmpib3NzLm9yZy9hZXJv\
Z2VhcmRpZ2dlci9sb2dvL2ZpbmFsL3BuZy9hZXJvZ2VhcmRpZ2dlcl9pY29uXzI1NnB4LnBuZyIK\
ICBkb2N1bWVudGF0aW9uVXJsOiAiaHR0cHM6Ly9kb2NzLmFlcm9nZWFyLm9yZy9leHRlcm5hbC9h\
cGIvbW9iaWxlY2ljZC5odG1sIgogIHByb3ZpZGVyRGlzcGxheU5hbWU6ICJSZWQgSGF0LCBJbmMu\
IgpwbGFuczoKICAtIG5hbWU6IGRlZmF1bHQKICAgIGRlc2NyaXB0aW9uOiBEZWZhdWx0IHBsYW4K\
ICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOiB7fQogICAgcGFyYW1ldGVyczoKICAgIC0gbmFt\
ZTogQU5EUk9JRF9MSUNFTlNFX0FHUkVFTUVOVAogICAgICBkZWZhdWx0OiAiIgogICAgICBwYXR0\
ZXJuOiBeeWVzJAogICAgICB0eXBlOiBzdHJpbmcKICAgICAgZGVzY3JpcHRpb246ICJUeXBlICd5\
ZXMnIGFib3ZlIHRvIGFjY2VwdCB0aGUgQW5kcm9pZCBTREsgTGljZW5zZSBBZ3JlZW1lbnQuIGh0\
dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3N0dWRpby90ZXJtcy5odG1sIgogICAgICB0aXRs\
ZTogQW5kcm9pZCBTREsgTGljZW5zZSBBZ3JlZW1lbnQKICAgICAgcmVxdWlyZWQ6IFRydWUKICAg\
ICAgZGlzcGxheV9ncm91cDogQW5kcm9pZCBTREsKICAgIC0gbmFtZTogQU5EUk9JRF9TREtfQ09O\
RklHCiAgICAgIGRlZmF1bHQ6IHwKICAgICAgICBbYmFzZV0KICAgICAgICB0b29scwogICAgICAg\
IHBsYXRmb3JtLXRvb2xzCiAKICAgICAgICBbcGxhdGZvcm1zXQogICAgICAgIGFuZHJvaWQtMjcK\
ICAgICAgICBhbmRyb2lkLTI2CiAgICAgICAgYW5kcm9pZC0yNQogICAgICAgICAKICAgICAgICBb\
YnVpbGQtdG9vbHNdCiAgICAgICAgMjcuMC4zCiAgICAgICAgMjcuMC4yCiAgICAgICAgMjcuMC4x\
CiAgICAgICAgMjYuMC4yCiAgICAgICAgMjYuMC4xCiAgICAgICAgMjYuMC4wCiAgICAgICAgMjUu\
MC4zCiAgICAgICAgMjUuMC4yCiAgICAgICAgIAogICAgICAgIFtleHRyYXM6Z29vZ2xlXQogICAg\
ICAgIGdvb2dsZV9wbGF5X3NlcnZpY2VzCiAgICAgICAgbTJyZXBvc2l0b3J5CiAgICAgICAgIAog\
ICAgICAgIFtleHRyYXM6YW5kcm9pZF0KICAgICAgICBtMnJlcG9zaXRvcnkKICAgICAgICAgCiAg\
ICAgICAgW2V4dHJhczptMnJlcG9zaXRvcnk6Y29tOmFuZHJvaWQ6c3VwcG9ydDpjb25zdHJhaW50\
OmNvbnN0cmFpbnQtbGF5b3V0XQogICAgICAgIDEuMC4wCiAgICAgICAgMS4wLjEKICAgICAgICAx\
LjAuMgogICAgICAgICAKICAgICAgICBbZXh0cmFzOm0ycmVwb3NpdG9yeTpjb206YW5kcm9pZDpz\
dXBwb3J0OmNvbnN0cmFpbnQ6Y29uc3RyYWludC1sYXlvdXQtc29sdmVyXQogICAgICAgIDEuMC4w\
CiAgICAgICAgMS4wLjIKICAgICAgICAgCiAgICAgICAgW2tleXN0b3JlXQogICAgICAgIGFsaWFz\
PUFuZHJvaWREZWJ1Z0tleQogICAgICAgIG5hbWU9QUcKICAgICAgICB1bml0PUFlcm9HZWFyCiAg\
ICAgICAgb3JnPVJlZEhhdAogICAgICAgIGxvYz1XYXRlcmZvcmQKICAgICAgICBzdGF0ZT1XRAog\
ICAgICAgIGNvdW50cnk9SVJMCiAgICAgICAgc3RvcmVwYXNzPWFuZHJvaWQKICAgICAgICBrZXlw\
YXNzPWFuZHJvaWQKICAgICAgdHlwZTogc3RyaW5nCiAgICAgIGRpc3BsYXlfdHlwZTogdGV4dGFy\
ZWEKICAgICAgZGVzY3JpcHRpb246ICJBbmRyb2lkIFNESyBjb25maWcgY29udGVudCIKICAgICAg\
dGl0bGU6IEFuZHJvaWQgU0RLIHBhY2thZ2UgY29uZmlnCiAgICAgIHJlcXVpcmVkOiBGYWxzZQog\
ICAgICB1cGRhdGFibGU6IFRydWUKICAgICAgZGlzcGxheV9ncm91cDogQW5kcm9pZCBTREsK"

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY vars /opt/ansible/vars
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
